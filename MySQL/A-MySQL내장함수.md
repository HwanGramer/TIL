# MySQL내장 함수
<br>

# 제어 흐름 함수

<br>

- ## IF(수식 , 참 , 거짓) ★
    
    3항연산자와 비슷하게 사용한다.
    ```
    SELECT IF (100>200 , '참이요' , '거짓이요');
    ```
    `결과 : 거짓이요`
    ```
    +---------------------------------------------+
    | IF (100>200 , '참이요' , '거짓이요')            |
    +---------------------------------------------+
    | 거짓이요                                      |
    +---------------------------------------------+
    ```
<br><br>
<br>

- ## IFNULL(수식1 , 수식2)

    수식1이 NULL이라면 수식2 반환<br>
    수식1이 NULL이아니라면 수식1반환
    ```
    SELECT IFNULL(NULL , '수식2입니다') , IFNULL(100,'널이군요');
    ```
    `결과 : 첫번째 '수식2입니다' , 두번째 100 출력`

    ```
    +------------------+-----------------+
    | 첫번째결과       | 두번째결과            |
    +------------------+-----------------+
    | 수식2입니다      | 100                |
    +------------------+-----------------+
    ``` 

    <br>
    <br><br>
***
<br><br>
# 문자열 함수
<br>

    문자열 함수는 문자열을 조작한다. 활용도가 높다.
<br>

- ## ASCII(아스키 코드) , CHAR(숫자)
    
    문자의 아스키 코드값을 돌려주거나 숫자의 아스키 코드값에 해당하는 문자를 돌려준다.
    ```
    SELECT ASCII('A') , CHAR(65);
    ```
    `결과 : 65 , A` <em>('A'의 아스키코드는 65이다.)</em><br><br>
<br>

- ## CHAR_LENGTH(문자열)

    문자열의 갯수(길이)를 반환해준다.<br>
    ```
    SELECT CHAR_LENGTH('안녕하세요');
    ```
    `결과 : 5` 
    ```
    +--------------------------------+
    | CHAR_LENGTH('안녕하세요')         |
    +--------------------------------+
    |                              5 |
    +--------------------------------+
    ```
<br>
<br>
<br>

- ## CONCAT(문자열1 , 문자열2 , ...)

    괄호안에있는 문자열을 이어준다<br>
    ```
    SELECT CONCAT('안','녕','하','세','요');
    ```
    `결과 : 안녕하세요 ` 
    ```
    +---------------------------------------+
    | CONCAT('안','녕','하','세','요')         |
    +---------------------------------------+
    | 안녕하세요                               |
    +---------------------------------------+
    ```
<br>
<br>
<br>

- ## CONCAT_WS('/' ,문자열1 , 문자열2 , ...)

    맨앞에있는 문자는 구분자로 문자열사이사이에 들어가진다.<br>
    ```
    SELECT CONCAT_WS('/','2022','11','15');
    ```
    `결과 : 2022/11/15 ` 
    ```
    +---------------------------------+
    | CONCAT_WS('/','2022','11','15') |
    +---------------------------------+
    | 2022/11/15                      |
    +---------------------------------+
    ```
<br>
<br>
<br>

- ## FORMAT(숫자 , 소수점 자릿수)

    숫자를 소수점 아래 자릿수까지 표현한다. 그리고 1000단위마다 (,)를 붙여준다.<br>
    ```
    SELECT FORMAT(24123143.34141344 , 5);
    ```
    결과 : 소수점을 5자릿수까지 나타내고 1000단위마다 콤마가찍힘.
    ```
    +-------------------------------+
    | FORMAT(24123143.34141344 , 5) |
    +-------------------------------+
    | 24,123,143.34141              |
    +-------------------------------+
    ```
<br>
<br>
<br>

- ## BIN(숫자) , HEX(숫자) , OCT(숫자)

    2진수 , 16진수 , 8진수<br>
    ```
    SELECT BIN(10) , HEX(10) , OCT(10);
    ```
    결과 : 1010 , A , 12
    ```
    +---------+---------+---------+
    | BIN(10) | HEX(10) | OCT(10) |
    +---------+---------+---------+
    | 1010    | A       | 12      |
    +---------+---------+---------+
    ```
<br>
<br>
<br>

- ## INSERT(기준문자열 , 위치 , 길이 , 삽입할 문자열)

    기준문자열의 위치부터 길이만큼 삽입할 문자열이 들어간다.<br>
    ```
    SELECT INSERT('abcdefghi' , 3 , 4 ,'@@@@') , INSERT('abcdefghi' , 3 , 2 ,'@@@@');
    ```
    결과 : ab@@@@ghi , ab@@@@efghi
    ```
    +-----------+-------------+
    | 첫번째      | 두번째       |
    +-----------+-------------+
    | ab@@@@ghi | ab@@@@efghi |
    +-----------+-------------+
    ```
<br>
<br>
<br>

- ## LEFT(문자열 , 길이) , RIGHT(문자열 , 길이)

    왼쪽 또는 오른쪽에서 문자열의 길이만큼 반환한다.<br>
    ```
    SELECT LEFT('abcdefghi',3) , RIGHT('abcdefghi',3);
    ```
    결과 : abc , ghi
    ```
    +---------------------+----------------------+
    | LEFT('abcdefghi',3) | RIGHT('abcdefghi',3) |
    +---------------------+----------------------+
    | abc                 | ghi                  |
    +---------------------+----------------------+
    ```
<br>
<br>
<br>

- ## UPPER(문자열) , LOWER(문자열)

    소문자를 대문자로 , 대문자를 소문자로 변경한다.<br>
    ```
    SELECT LOWER('heLLO') , UPPER('HEllo');
    ```
    결과 : hello , HELLO
    ```
    +----------------+----------------+
    | LOWER('heLLO') | UPPER('HEllo') |
    +----------------+----------------+
    | hello          | HELLO          |
    +----------------+----------------+
    ```
<br>
<br>
<br>

- ## LPAD(문자열 , 길이 , 채울문자열) , RPAD(문자열 , 길이 , 채울문자열)

    문자열을 길이만큼 늘린 후에 , 빈 곳을 채울문자열로 채운다<br>
    ```
    SELECT LPAD('안녕' , 5 , '###') , RPAD('안녕' , 5 ,'###');
    ```
    결과 : ###안녕 , 안녕###
    ```
    +--------------+-----------------+
    | 왼쪽부터       | 오른쪽부터         |
    +--------------+-----------------+
    | ###안녕       | 안녕###          |
    +--------------+-----------------+
    ```
<br>
<br>
<br>

- ## LTRIM(문자열) , RTRIM(문자열)

    문자열의 왼쪽/오른쪽 공백을 제거한다.<br>
    ```
    SELECT LTRIM('    hello') , RTRIM('hello    ');
    ```
    결과 : hello , hello
    ```
    +--------------------+--------------------+
    | LTRIM('    hello') | RTRIM('hello    ') |
    +--------------------+--------------------+
    | hello              | hello              |
    +--------------------+--------------------+
    ```
<br>
<br>
<br>

- ## TRIM(문자열) , TRIM(방향 , 자를문자열 FROM 문자열)

    TRIM은 문자열의 앞뒤공백을 모두없앤다.<br>
    TRIM(BOTH '#' FROM '####hello####')은 양쪽모두 '#'을 없앤다.<br>

    * LEADING : 문자열앞에 해당하면 모두 지운다.
    * TRAILING : 문자열뒤에 해당하면 모두 지운다.
    * BOTH : 문자열 양쪽에 해당하면 모두 지운다.<br><br>

    ```
    SELECT TRIM('   hello  ') , 
    TRIM(LEADING '#' FROM '####hello####'), 
    TRIM(TRAILING '#' FROM '####hello####'), 
    TRIM(BOTH '#' FROM '####hello####');
    ```
    결과 : hello , hello#### , ####hello , hello
    ```
    +--------------------+-----------+-----------+-------+
    | TRIM('   hello  ') | LEADING   | TRAILING  | BOTH  |
    +--------------------+-----------+-----------+-------+
    | hello              | hello#### | ####hello | hello |
    +--------------------+-----------+-----------+-------+
    ```
<br>
<br>
<br>

- ## REPEAT(문자열 , 횟수)

    문자열을 횟수만큼 반복해서 나온다.<br>
    ```
    SELECT REPEAT('sql' ,5);
    ```
    결과 : sqlsqlsqlsqlsql
    ```
    +------------------+
    | REPEAT('sql' ,5) |
    +------------------+
    | sqlsqlsqlsqlsql  |
    +------------------+
    ```
<br>
<br>
<br>

- ## REPLACE(문자열 , 원래 문자열 , 바꿀 문자열) 문자열 수정

    문자열에서 원래문자열을 찾아서 바꿀문자열로 바꿔준다.(여러개도 가능)<br>
    ### 1.
    ```
    SELECT REPLACE('안녕하십니까 스폰지밥 입니다' ,'스폰지밥','뚱이');
    ```
    결과 : 안녕하십니까 뚱이 입니다
    ```
    +-------------------------------------+
    | REPLACE                             |
    +-------------------------------------+
    | 안녕하십니까 뚱이 입니다                  |
    +-------------------------------------+
    ```
    ### 2.
    ```
    SELECT REPLACE('010830010132' ,'0','#');
    ```
    결과 : #1#83##1#132 (0을 전부 #으로 바꿈);
    ```
    +----------------------------------+
    | REPLACE('010830010132' ,'0','#') |
    +----------------------------------+
    | #1#83##1#132                     |
    +----------------------------------+
    ```

<br>
<br>
<br>

- ## REVERSE(문자열)

    문자열의 순서를 거꾸로 만든다.<br>
    ```
    SELECT REVERSE ('helloWorld');
    ```
    결과 : dlroWolleh
    ```
    +------------------------+
    | REVERSE ('helloWorld') |
    +------------------------+
    | dlroWolleh             |
    +------------------------+
    ```
<br>
<br>
<br>


- ## SPACE(길이)

    길이만큼의 공백을 만든다.<br>
    ```
    SELECT CONCAT('안녕 나는', SPACE(10) , 'mysql임');
    ```
    결과 : 안녕 나는 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mysql임
    ```
    +-------------------------------------------------+
    | CONCAT('안녕 나는', SPACE(10) , 'mysql임')         |
    +-------------------------------------------------+
    | 안녕 나는          mysql임                         |
    +-------------------------------------------------+
    ```
<br>
<br>
<br>


- ## ★SUBSTRING(문자열 , 시작위치 , 길이) 또는 SUBSTRING(문자열 FROM 시작위치 FOR 길이)★

    시작 위치부터 길이만큼 문자를 반환한다. 길이가 생략되면 문자열 끝까지 반환함.<br>
    ```
    SELECT SUBSTRING('빡빡이아저씨야' , 3 , 2);
    ```
    결과 : 이아
    ```
    +--------------------------------------------+
    | SUBSTRING('빡빡이아저씨야' , 3 , 2)            |
    +--------------------------------------------+
    | 이아                                        |
    +--------------------------------------------+
    ```
<br>
<br>
<br>


- ## SUBSTRING_INDEX(문자열 , 구분자 , 횟수)

    문자열에서 구분자가 왼쪽부터 횟수 번째 나오면 그 이후의 오른쪽은 버린다. 횟수가 음수면 오른쪽부터 세고 왼쪽을 버린다.<br>
    ```
    SELECT SUBSTRING_INDEX('cafe.naver.com','.',2) , 
    SUBSTRING_INDEX('cafe.naver.com' ,'.',-2);
    ```
    결과 : cafe.naver , naver.com
    ```
    +------------+-----------+
    | 첫번째       | 두번째     |
    +------------+-----------+
    | cafe.naver | naver.com |
    +------------+-----------+
    ```
<br>
<br>
<br>

- ## ELT(위치 , 문자열1 , 문자열2 , ...)
- ## FIELD(찾을 문자열 , 문자열1 , 문자열2 , ...)
- ## FIND_IN_SET(찾을 문자열 , 문자열 리스트)
- ## INSTR(기준 문자열 , 부분 문자열)
- ## LOCATE('둘' , '하나둘셋')<br><br>


    ELT() : 위치 번째에 해당하는 문자열을 반환한다.<br>
    FELED() : 찾을 문자열의 위치를 찾아서 반환함. 없으면 0반환<br>
    FIND_IN_SET() : 찾을 문자열을 문자열 리스트에서 찾아서 위치를 반환한다.<br>
    INSTR() : 기준문자열에서 부분문자열을 찾아서 그 시작위치를 반환한다.<br>
    LOCATE() : INSTR와 동인하지만 파라미터의 순사가 반대이다.<br>

    ```
    SELECT 
    ELT(2,'하나','둘','셋') AS 'ELT', 
    FIELD('둘' , '하나','둘','셋') AS 'FIELD',
    FIND_IN_SET('둘' ,'하나,둘,셋') AS 'FIND_IN_SET',
    INSTR('하나둘셋','둘') AS 'INSTR',
    LOCATE('둘' , '하나둘셋') AS 'LOCATE';
    ```
    결과 : 둘 , 2 , 2 , 3 , 3
    ```
    +------+-------+-------------+-------+--------+
    | ELT  | FIELD | FIND_IN_SET | INSTR | LOCATE |
    +------+-------+-------------+-------+--------+
    | 둘   |     2 |           2 |     3 |      3 |
    +------+-------+-------------+-------+--------+
    ```
<br>
<br>
<br>

***

<br><br>
# 날짜 및 시간함수

    날짜 및 시간을 조작하는 다양한 함수

<br>

- ## ADDDATE(날짜 , 차이) , SUBDATE(날짜 , 차이)

    날짜를 기준으로 차이를 더하거나 뺀 날짜를 구한다.<br>
    ## ADDDATE
    ```
    SELECT 
    ADDDATE('2025-01-01', INTERVAL 31 DAY ) , 
    ADDDATE('2025-01-01' , INTERVAL 1 MONTH );
    ```
    ADDDATE
    ```
    +------------+------------+
    | ADDDATE    | ADDDATE    |
    +------------+------------+
    | 2025-02-01 | 2025-02-01 |
    +------------+------------+
    ```
    ## SUBDATE
    ```
    SELECT 
    SUBDATE('2025-01-01' , INTERVAL 31 DAY) AS 'SUBDATE', 
    SUBDATE('2025-01-01' , INTERVAL 1 MONTH ) AS 'SUBDATE';
    ```
    SUBDATE
    ```
    +------------+------------+
    | SUBDATE    | SUBDATE    |
    +------------+------------+
    | 2024-12-01 | 2024-12-01 |
    +------------+------------+
    ```
<br>
<br>
<br>

- ## SUBSTRING_INDEX(문자열 , 구분자 , 횟수)

    문자열에서 구분자가 왼쪽부터 횟수 번째 나오면 그 이후의 오른쪽은 버린다. 횟수가 음수면 오른쪽부터 세고 왼쪽을 버린다.<br>
    ```
    SELECT SUBSTRING_INDEX('cafe.naver.com','.',2) , 
    SUBSTRING_INDEX('cafe.naver.com' ,'.',-2);
    ```
    결과 : cafe.naver , naver.com
    ```
    +------------+-----------+
    | 첫번째       | 두번째     |
    +------------+-----------+
    | cafe.naver | naver.com |
    +------------+-----------+
    ```
<br>
<br>
<br>

- ## ADDTIME(날짜/시간,시간) , SUBTIME(날짜/시간 , 시간)

    날짜/시간을 기준으로 시간을 더하거나 뺀 결과를 구한다.<br>

    ## ADDTIME
    ```
    SELECT 
    ADDTIME('2025-01-01 23:59:59' , '1:1:1') , 
    ADDTIME('15:00:00','2:10:10');
    ```
    ADDTIME
    ```
    +---------------------+----------+
    | 1                   | 1        |
    +---------------------+----------+
    | 2025-01-02 01:01:00 | 17:10:10 |
    +---------------------+----------+
    ```
    <br>

    ## SUBTIME
    ```
    SELECT 
    SUBTIME('2025-01-01 23:59:59' , '1:1:1') , 
    SUBTIME('15:00:00','2:10:10');
    ```
    SUBTIME
    ```
    +---------------------+----------+
    | SUBTIME             | SUBTIME  |
    +---------------------+----------+
    | 2025-01-01 22:58:58 | 12:49:50 |
    +---------------------+----------+
    ```
<br>
<br>
<br>

- ## ★CURDATE() , CURTIME() , NOW() , SYSDATE()★

    CURDATE() : 현재 연-월-일<br>
    CURTIME() : 현재 시:분:초<br>
    NOW() , SYSDATE() : 현재 연-월-일 시:분:초<br>
    ```
    SELECT SUBSTRING_INDEX('cafe.naver.com','.',2) , 
    SUBSTRING_INDEX('cafe.naver.com' ,'.',-2);
    ```
    결과 :  2022-11-16 , 17:08:24 , 2022-11-16 17:08:24 , 2022-11-16 17:08:24
    ```
    +------------+-----------+---------------------+---------------------+
    | CURDATE()  | CURTIME() | NOW()               | SYSDATE()           |
    +------------+-----------+---------------------+---------------------+
    | 2022-11-16 | 17:08:24  | 2022-11-16 17:08:24 | 2022-11-16 17:08:24 |
    +------------+-----------+---------------------+---------------------+
    ```
<br>
<br>
<br>

- ## ★YEAR(날짜) , MONTH(날짜) , DAY(날짜) , HOUR(날짜) , MINUTE(시간) , SECOND(시간) , MICROSECOND(시간)★

    연 , 월 , 일 , 시 , 분 , 초 , 밀리초만 출력되어 나온다.<br>
    ```
    SELECT YEAR(NOW()) , MONTH(NOW()) , DAY(NOW()) , HOUR(NOW()) , MINUTE(NOW()) , SECOND(NOW()) , MICROSECOND(NOW());
    ```
    결과
    ```
    +-------------+--------------+------------+-------------+---------------+---------------+--------------------+
    | YEAR(NOW()) | MONTH(NOW()) | DAY(NOW()) | HOUR(NOW()) | MINUTE(NOW()) | SECOND(NOW()) | MICROSECOND(NOW()) |
    +-------------+--------------+------------+-------------+---------------+---------------+--------------------+
    |        2022 |           11 |         16 |          17 |            14 |            30 |                  0 |
    +-------------+--------------+------------+-------------+---------------+---------------+--------------------+
    ```
<br>
<br>
<br>

- ## DATEDIFF(날짜1 , 날짜2) , TIMEDIFF(날짜1 또는 시간1 , 날짜1 또는 시간2)

    DATEDIFF() : 날짜1-날짜2 즉 날짜2에서 날짜1까지 몇일 남았는지 구한다.<br>
    TIMEDIFF() : 시간1-시간2<br>
    ```
    SELECT DATEDIFF('2025-01-01' , NOW()) , TIMEDIFF('23:23:59','12:11:10');
    ```
    결과
    ```
    +--------------------------------+---------------------------------+
    | DATEDIFF('2025-01-01' , NOW()) | TIMEDIFF('23:23:59','12:11:10') |
    +--------------------------------+---------------------------------+
    |                            777 | 11:12:49                        |
    +--------------------------------+---------------------------------+
    ```
<br>
<br>
<br>

- ## LAST_DAY(날짜)

    주어진 날짜의 마지막 날짜를 구한다. 주로 그 달이 몇 일까지 있는지 확인할때 사용한다.<br>

    ```
    SELECT LAST_DAY('2025-02-01');
    ```
    결과 : 2025-02-28
    ```
    +------------------------+
    | LAST_DAY('2025-02-01') |
    +------------------------+
    | 2025-02-28             |
    +------------------------+
    ```
<br>
<br>
<br>

- ## MAKEDATE(연도 , 정수)

    연도에서 정수만큼 지난 날짜를 구한다.<br>

    ```
    SELECT MAKEDATE(2025 , 42);
    ```
    결과 : 2025-02-11
    ```
    +---------------------+
    | MAKEDATE(2025 , 42) |
    +---------------------+
    | 2025-02-11          |
    +---------------------+
    ```
<br>
<br>
<br>

- ## MAKETIME(시,분,초)

    시,분,초를 이용해서 '시:분:초'TIME형식을 만든다<br>

    ```
    SELECT MAKETIME(14,3,2);
    ```
    결과 : 14:03:02 
    ```
    +------------------+
    | MAKETIME(14,3,2) |
    +------------------+
    | 14:03:02         |
    +------------------+
    ```
<br>
<br>
<br>

- ## QUARTER(날짜)

    날짜가 4분기 중에서 몇 분기인지를 구한다.<br>

    ```
    SELECT QUARTER('2025-07-07');
    ```
    결과 : 3
    ```
    +-----------------------+
    | QUARTER('2025-07-07') |
    +-----------------------+
    |                     3 |
    +-----------------------+
    ```
<br>
<br>
<br>

- ## TIME_TO_SEC(시간)

    시간을 초 단위로 구한다.<br>

    ```
    SELECT TIME_TO_SEC('12:11:10');
    ```
    결과 : 43870
    ```
    +-------------------------+
    | TIME_TO_SEC('12:11:10') |
    +-------------------------+
    |                   43870 |
    +-------------------------+
    ```
<br>
<br>
<br>

<br><br>
# 시스템 정보 함수

    시스템의 정보를 출력하는 함수를 제공한다.

<br>

- ## USER() , DATABASE()

    현재 사용자 및 현재 선택된 데이터베이스를 구한다.<br>

    ```
    SELECT USER() , DATABASE();
    ```
    결과 : root@localhost , sqldb
    ```
    +----------------+------------+
    | USER()         | DATABASE() |
    +----------------+------------+
    | root@localhost | sqldb      |
    +----------------+------------+
    ```
<br>
<br>
<br>

- ## ★ FOUND_ROWS() ★

    바로 앞의 SELECT문에서 조회된 행의 개수를 구한다.<br>

    ```
    USE sqldb;
    SELECT * FROM usertbl;
    SELECT FOUND_ROWS();
    ```
    결과 : 테이블의 행이 10개의 데이터가 출력됬다. 그러므로 10이 반환된다.
    ```
    +--------------+
    | FOUND_ROWS() |
    +--------------+
    |           10 |
    +--------------+
    ```
<br>
<br>
<br>

- ## ★ ROW_COUNT() ★

    바로 앞의 INSERT , UPDATE , DELETE문에서 입력, 수정, 삭제된 행의 개수를 구한다. CREATE, DROP문은 0을 반환하고 , SELECT문은 -1을 반환한다.<br>

    ```
    USE sqldb;
    UPDATE buytbl SET price=price*2;
    SELECT ROW_COUNT();
    ```
    결과 : Rows matched: 12  Changed: 12  Warnings: 0 총 12개의 행이 수정됬다.
    ```
    +-------------+
    | ROW_COUNT() |
    +-------------+
    |          12 |
    +-------------+
    ```
<br>
<br>
<br>

- ## VERSION()

    현재MySQL의 버전을 구한다.<br>

    ```
    SELECT VERSION();
    ```
    결과 : 8.0.31
    ```
    +-----------+
    | VERSION() |
    +-----------+
    | 8.0.31    |
    +-----------+
    ```
<br>
<br>
<br>

- ## SLEEP() 

    쿼리의 실행을 잠깐 멈춘다.<br>

    ```
    SELECT SLEEP(5);
    SELECT '5초 후에 보입니다 나옵니다';
    ```
    결과 : '5초 후에 보입니다 나옵니다'가 5초뒤에 나온다
<br>
<br>
<br>