# 피벗의 구현 
피벗은 한 열에 포함된 여러 값을 출력하고 , 이를 여러 열로 변환하여 테이블 반환 식을 회전하고 필요하면 집계까지 수행하는 것을 말한다.

```
+-----------+--------+--------+
| uName     | season | amount |
+-----------+--------+--------+
| 김범수    | 겨울   |        10 |
| 윤종신    | 여름   |        15 |
| 김범수    | 가을   |        25 |
| 김범수    | 봄     |        3 |
| 김범수    | 봄     |       37 |
| 윤종신    | 겨울   |        40 |
| 김범수    | 여름   |        14 |
| 김범수    | 겨울   |        22 |
| 윤종신    | 여름   |        64 |
+-----------+--------+--------+
```
이 테이블의 데이터을 이용하여 구현해보겠다.

<br>왼쪽은 판매자 이름 , 판매 계절 , 판매 수량으로 구성된 테이블이다. 이를 각 판매자가 계절별로 몇 개 구매했는지 표로 나타내고 싶을때 SUM()과 IF()함수를 활용해서 피벗테이블을 만들 수 있다.

<br>

```
SELECT uName ,
	SUM(IF(season='봄' , amount,0)) AS '봄',
    SUM(IF(season='여름' , amount,0)) AS '여름',
    SUM(IF(season='가을' , amount,0)) AS '가을',
    SUM(IF(season='겨울' , amount,0)) AS '겨울',
    SUM(amount) AS '합계' FROM pivotTest GROUP BY uName;
```
SUM()함수안에 IF()문이 돌면서 sesason='계절' 이 수식이 맞다면 amount를 더하고 아니라면 0을 더하게되면서 , 판매계절별로 판매 수량을 구할 수 있다. 그리고 판매자별로 구분했기때문에 GROUP BY uName으로 묶어주었다.

<br>

결과

```
+-----------+------+--------+--------+--------+--------+
| uName     | 봄    | 여름    | 가을    | 겨울    | 합계    |
+-----------+------+--------+--------+--------+--------+
| 김범수      |   40 |     14 |     25 |     32 |    111 |
| 윤종신      |    0 |     79 |      0 |     40 |    119 |
+-----------+------+--------+--------+--------+--------+
```
